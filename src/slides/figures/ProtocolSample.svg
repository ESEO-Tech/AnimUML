<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="426px" preserveAspectRatio="none" style="width:433px;height:426px;" version="1.1" viewBox="0 0 433 426" width="433px" zoomAndPan="magnify"><defs><filter height="300%" id="f1m8nt6sb4g68x" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="86.2969" y2="339.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="371" x2="371" y1="86.2969" y2="339.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="8" y="82.9951">device</text><ellipse cx="33.5" cy="13" fill="#FEFECE" filter="url(#f1m8nt6sb4g68x)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M33.5,21 L33.5,48 M20.5,29 L46.5,29 M33.5,48 L20.5,63 M33.5,48 L46.5,63 " fill="none" filter="url(#f1m8nt6sb4g68x)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="8" y="351.3545">device</text><ellipse cx="33.5" cy="364.6563" fill="#FEFECE" filter="url(#f1m8nt6sb4g68x)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M33.5,372.6563 L33.5,399.6563 M20.5,380.6563 L46.5,380.6563 M33.5,399.6563 L20.5,414.6563 M33.5,399.6563 L46.5,414.6563 " fill="none" filter="url(#f1m8nt6sb4g68x)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1m8nt6sb4g68x)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="317" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="324" y="70.9951">driver : Driver</text><rect fill="#FEFECE" filter="url(#f1m8nt6sb4g68x)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="317" y="338.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="324" y="358.3545">driver : Driver</text><polygon fill="#A80036" points="44.5,113.4297,34.5,117.4297,44.5,121.4297,40.5,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="38.5" x2="370.5" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="50.5" y="112.3638">askData()</text><polygon fill="#A80036" points="359.5,142.5625,369.5,146.5625,359.5,150.5625,363.5,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="365.5" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="40.5" y="141.4966">write(3) // total number of data bytes</text><polygon fill="#A80036" points="359.5,171.6953,369.5,175.6953,359.5,179.6953,363.5,175.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="365.5" y1="175.6953" y2="175.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="40.5" y="170.6294">write(2) // number of packets</text><polygon fill="#A80036" points="359.5,200.8281,369.5,204.8281,359.5,208.8281,363.5,204.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="365.5" y1="204.8281" y2="204.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="40.5" y="199.7622">write(1) // number of data bytes in first packet</text><polygon fill="#A80036" points="359.5,229.9609,369.5,233.9609,359.5,237.9609,363.5,233.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="365.5" y1="233.9609" y2="233.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="40.5" y="228.895">write(FIRST_DATA_BYTE)</text><polygon fill="#A80036" points="359.5,259.0938,369.5,263.0938,359.5,267.0938,363.5,263.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="365.5" y1="263.0938" y2="263.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="40.5" y="258.0278">write(2) // number of data bytes in second packet</text><polygon fill="#A80036" points="359.5,288.2266,369.5,292.2266,359.5,296.2266,363.5,292.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="365.5" y1="292.2266" y2="292.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="40.5" y="287.1606">write(SECOND_DATA_BYTE)</text><polygon fill="#A80036" points="359.5,317.3594,369.5,321.3594,359.5,325.3594,363.5,321.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="365.5" y1="321.3594" y2="321.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="40.5" y="316.2935">write(THIRD_DATA_BYTE)</text><!--
@startuml
actor device
participant "driver : Driver" as driver
driver -> device: askData()
device -> driver: write(3) // total number of data bytes
device -> driver: write(2) // number of packets
device -> driver: write(1) // number of data bytes in first packet
device -> driver: write(FIRST_DATA_BYTE)
device -> driver: write(2) // number of data bytes in second packet
device -> driver: write(SECOND_DATA_BYTE)
device -> driver: write(THIRD_DATA_BYTE)
@enduml

PlantUML version 1.2019.03(Sun Mar 10 12:04:44 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_265-8u265-b01-0ubuntu2~16.04-b01
Operating System: Linux
OS Version: 4.4.0-186-generic
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>